<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>WebSocket Carriage Mechanism &mdash; EBU-TT-Live Toolkit 3.0.3 documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="_static/graphviz.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/sphinx_highlight.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Direct Carriage Mechanism" href="direct_carriage_mechanism.html" />
    <link rel="prev" title="Filesystem Carriage Mechanism" href="filesystem_carriage_mechanism.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            EBU-TT-Live Toolkit
          </a>
              <div class="version">
                3.0.3
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="overview.html">Overview of the EBU-TT live toolkit.</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="nodes_and_carriage_mechanisms.html">Nodes and Carriage Mechanisms</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="nodes_and_carriage_mechanisms.html#processing-nodes">Processing Nodes</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="nodes_and_carriage_mechanisms.html#carriage-mechanisms">Carriage mechanisms</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="filesystem_carriage_mechanism.html">Filesystem Carriage Mechanism</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">WebSocket Carriage Mechanism</a></li>
<li class="toctree-l4"><a class="reference internal" href="direct_carriage_mechanism.html">Direct Carriage Mechanism</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="scripts_and_their_functions.html">Scripts and their functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="configurator.html">Configuration files and <code class="docutils literal notranslate"><span class="pre">ebu-run</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="validation.html">Document and sequence validation</a></li>
<li class="toctree-l2"><a class="reference internal" href="user_input_producer.html">User input producer</a></li>
<li class="toctree-l2"><a class="reference internal" href="timing_resolution.html">Timing resolution and consumer logic</a></li>
<li class="toctree-l2"><a class="reference internal" href="segmentation.html">Segmentation of EBU-TT-Live document sequences</a></li>
<li class="toctree-l2"><a class="reference internal" href="deduplication.html">DeDuplication of EBU-TT-Live documents</a></li>
<li class="toctree-l2"><a class="reference internal" href="denesting.html">Denesting of EBU-TT-Live documents</a></li>
<li class="toctree-l2"><a class="reference internal" href="conversion_from_ebutt.html">Conversion of EBU-TT Part 1 documents to EBU-TT Live documents</a></li>
<li class="toctree-l2"><a class="reference internal" href="conversion_to_ebuttd.html">Conversion of EBU-TT-Live documents to EBU-TT-D documents</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="ebu_tt_live.html">Source code reference</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">EBU-TT-Live Toolkit</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="overview.html">Overview of the EBU-TT live toolkit.</a></li>
          <li class="breadcrumb-item"><a href="nodes_and_carriage_mechanisms.html">Nodes and Carriage Mechanisms</a></li>
      <li class="breadcrumb-item active">WebSocket Carriage Mechanism</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/websocket_carriage_mechanism.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="websocket-carriage-mechanism">
<h1>WebSocket Carriage Mechanism<a class="headerlink" href="#websocket-carriage-mechanism" title="Permalink to this heading"></a></h1>
<p>The WebSocket carriage mechanism writes produced documents to WebSocket connections and consumes documents from WebSocket connections. This is conformant to the EBU-TT Live WebSocket Carriage Mechanism specification, using the URL form:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ws</span><span class="p">:</span><span class="o">//</span><span class="p">[</span><span class="n">host</span><span class="p">]:[</span><span class="n">port</span><span class="p">]:[</span><span class="n">sequenceId</span><span class="p">]</span><span class="o">/</span><span class="p">[</span><span class="n">publish</span> <span class="o">|</span> <span class="n">subscribe</span><span class="p">]</span>
</pre></div>
</div>
<p>There are two ways to make a connection between node A and node B where documents of sequence “Sequence1” flow from A to B.</p>
<ol class="arabic">
<li><p>Node A makes a /publish connection, for example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ws</span><span class="p">:</span><span class="o">//</span><span class="mf">1.2.3.4</span><span class="p">:</span><span class="mi">9000</span><span class="o">/</span><span class="n">Sequence1</span><span class="o">/</span><span class="n">publish</span>
</pre></div>
</div>
</li>
<li><p>Node B makes a /subscribe connection, for example :</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ws</span><span class="p">:</span><span class="o">//</span><span class="mf">1.2.3.4</span><span class="o">/</span><span class="mi">9001</span><span class="o">/</span><span class="n">Sequence1</span><span class="o">/</span><span class="n">subscribe</span>
</pre></div>
</div>
</li>
</ol>
<p>If the sequence identifier contains a character that is reserved for use in URLs then it must be percent encoded exactly once before inserting into the URL. For example a sequence id “abc/def” becomes “abc%2Fdef” before inserting into the URL.</p>
<section id="error-handling">
<h2>Error handling<a class="headerlink" href="#error-handling" title="Permalink to this heading"></a></h2>
<p>The expected documents are those that have the correct sequence number and flow from the emitter to the receiver. As per the specification, any unexpected data will cause the connection to be closed. These include:</p>
<ul class="simple">
<li><p>Any data received by the emitter, since this reverse flow of data is unexpected.</p></li>
<li><p>Any document with a non-matching sequence identifier</p></li>
<li><p>Any data that is not a valid document</p></li>
</ul>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="filesystem_carriage_mechanism.html" class="btn btn-neutral float-left" title="Filesystem Carriage Mechanism" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="direct_carriage_mechanism.html" class="btn btn-neutral float-right" title="Direct Carriage Mechanism" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2017, European Broadcasting Union.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>