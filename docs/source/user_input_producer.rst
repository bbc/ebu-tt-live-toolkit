User input producer
===================

The user input producer is composed of a user interface written in javascript, the user interface is defined in the file `ebu_tt_live/ui/user_input_producer/user_input_producer.html`. It works with Javascript, JQuery_ and nunjucks_.

Demo
----

To test the user input producer, setup the environment as indicated in the `README.md` file at the root of the project. Then launch the ``ebu-user-input-consumer`` script and open the `ui/user_input_producer/user_input_producer.html` file in your browser. Click on the ``Connect`` button on the HTML page; the default URL should work: if you changed it in the `ebu_tt_live/script/ebu-user-input-consumer.py` file, then enter your custom URL, just be careful that the carriage uses websocket. If you have not already created a sequence, then create one with the corresponding button, set its options and select it in the dropdown box that allows you to choose a sequence identifier. 

There are three ways of sending documents :
    * `Send document on click on "Send" button` will issue a new document each time you clik the "Send" button.
    * `Send document on scheduled time` replaces the "Send" button by an input box and a "Schedule" button. You have two options, using a "local" clock, which is the time of your computer or using a "media" clock, which is a clock starting at `00:00:00.0` when you click on "Synchronize" button. Times have to be entered using `hh:mm:ss` format in the "Scheduled time" input. When you click on "Schedule" the current document state is set to be sent at the given time. You can now change any field to schedule a new document without waiting.
    * `Send documents asynchronously` will send a new document every `x` seconds, taking your modifications on-the-go.

You can type subtitle's text in the `Subtitles text` box. Each time a new document is being sent it should be logged by the ``ebu-user-input-consumer`` script.

More demo scenario examples :
    * Run `ebu-user-input-forwarder`. Open the `ui/user_input_producer/user_input_producer.html` page and connect it to the forwarder via websocket (click "connect" button). Open in a separate window the `test.html` page at the root of the project, connect on this page too. From the user input producer page create a new sequence, on the `test.html` window subscribe to the same sequence. Send documents from the user input producer page. View those pages being validated in the user input forwarder process output. Finally, view the documents arriving on the test.html page. You can even do this with 1x user input forwarder and `n` sequences, generated by `n` user input producer pages and viewed by `m` `test.html` pages.
    * Run `ebu-user-input-forwarder --folder-export output`, this will write all the files you send from the user input producer interface (`ui/user_input_producer/user_input_producer.html`) to the output folder. Create a sequence `testSeq` for example and send one document, in a new terminal run `ebu-simple-consumer -m output/manifest_testSeq.txt -f`. You should see the documents you send from the user input producer interface being validated by the `ebu-user-input-forwarder` process output and then displayed by the `ebu-simple-consumer` script.

You can also try documents being generated on demand, at scheduled times or asynchronously by using the sending modes presented above.

.. _JQuery: https://jquery.com/
.. _nunjucks: https://mozilla.github.io/nunjucks/


